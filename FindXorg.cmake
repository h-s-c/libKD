find_package(PkgConfig)
pkg_check_modules(PC_XORG QUIET xcb xcb-ewmh xcb-util xkbcommon)

find_path(XCB_INCLUDE_DIR NAMES xcb/xcb.h PATHS ${PC_XORG_INCLUDE_DIRS})
find_path(XCB_EWHM_INCLUDE_DIR NAMES xcb/xcb_ewmh.h PATHS ${PC_XORG_INCLUDE_DIRS})
find_path(XCB_UTIL_INCLUDE_DIR NAMES xcb/xcb_util.h PATHS ${PC_XORG_INCLUDE_DIRS})
find_path(XKBCOMMON_INCLUDE_DIR NAMES xkbcommon/xkbcommon.h PATHS ${PC_XORG_INCLUDE_DIRS})
find_path(XKBCOMMON_X11_INCLUDE_DIR NAMES xkbcommon/xkbcommon-x11.h PATHS ${PC_XORG_INCLUDE_DIRS})
set(XORG_INCLUDE_DIR ${XCB_INCLUDE_DIR} ${XCB_EWHM_INCLUDE_DIR} ${XCB_UTIL_INCLUDE_DIR} ${XKBCOMMON_INCLUDE_DIR} ${XKBCOMMON_X11_INCLUDE_DIR})
list(REMOVE_DUPLICATES XORG_INCLUDE_DIR)

find_library(XCB_LIBRARY NAMES xcb PATHS ${PC_XORG_LIBRARY_DIRS})
find_library(XCB_EWHM_LIBRARY NAMES xcb-ewmh PATHS ${PC_XORG_LIBRARY_DIRS})
find_library(XCB_UTIL_LIBRARY NAMES xcb-util PATHS ${PC_XORG_LIBRARY_DIRS})
find_library(XKBCOMMON_LIBRARY NAMES xkbcommon PATHS ${PC_XORG_LIBRARY_DIRS})
find_library(XKBCOMMON_X11_LIBRARY NAMES xkbcommon-x11 PATHS ${PC_XORG_LIBRARY_DIRS})
set(XORG_LIBRARIES ${XCB_LIBRARY} ${XCB_EWHM_LIBRARY} ${XCB_UTIL_LIBRARY} ${XKBCOMMON_LIBRARY} ${XKBCOMMON_X11_LIBRARY})

find_package_handle_standard_args(XORG DEFAULT_MSG XORG_LIBRARIES)
mark_as_advanced(XCB_INCLUDE_DIR XCB_EWHM_INCLUDE_DIR XCB_EWHM_INCLUDE_DIR XKBCOMMON_INCLUDE_DIR XKBCOMMON_X11_INCLUDE_DIR XCB_LIBRARY XCB_EWHM_LIBRARY XCB_UTIL_LIBRARY XKBCOMMON_LIBRARY XKBCOMMON_X11_LIBRARY)